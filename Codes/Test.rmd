---
title: Covid19 Analysis
author: "Maeva_Braeckevelt"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Introduction
The objectif in this analysis is to analyse the pattern of association between registered covid-19 cases and registered number of death du to covi-19 on the 26 october 2020.The data gathered by the Center for Systems Science and Engineering and the World Bank'sites is composed by a few variables, such as the countries, the confirmed cases, the deaths, (both by person), and the population.My sample is on day of analysis compare to a month, a year...

```{r, include=F, message=FALSE, echo=FALSE, eval=TRUE}
# Packages to use
library(tidyverse)
# For scaling ggplots
require(scales)
# Estimate piecewise linear splines
#install.packages("lspline")
library(lspline)
# Estimate robust SE
#install.packages("estimatr")
library(estimatr)
# Compare models with robust SE
#install.packages("texreg")
library(texreg)
# For different themes
#install.packages(ggthemes)
library(ggthemes)

# First, I will import ly clean data from github
my_url <- "https://raw.githubusercontent.com/Maeva2408/DA2_Assignement/main/Data/Clean/covid_pop_10_26_2020_clean.csv"
df_covid <- read_csv( my_url )
```

# Data

To simplify the undertsanding of my analysis, I have decided to drop the counties that have 0 death, it only represent 7% of the data so I will focus on the majority of non-zero values. I decided to  convert my cases confirmed and of deaths per 1000 persons, and my population by millions. These conversion will help the clarity of the analysis and give me the possibilty of using the log-tranformation


```{r, include=F, message=FALSE, echo=FALSE, eval=TRUE}
View( df_covid %>% filter( death==0) ) 
# Drop if death is 0
df_covid <- df_covid %>% filter( !(death==0) ) 
#New scale
df_covid <- df_covid %>% transmute( country = country,
                       confirmed = confirmed/1000,
                       deaths    =  death/1000,
                       recovered = recovered/1000,
                       active    = active/1000,
                         population = population/1000000)
```

# Clean data

```{r, echo=FALSE, figures-side, fig.show="hold", warning= FALSE, message = FALSE}
df_covid %>%
  keep(is.numeric) %>% 
  gather() %>% 
  ggplot(aes(value)) +
  facet_wrap(~key, scales = "free") +
  geom_histogram()+
  theme_bw()+
  scale_fill_wsj()+
  labs(x = "Number of registered death (26/10/2020)",y = "Number of registered case  (26/10/2020)")
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
